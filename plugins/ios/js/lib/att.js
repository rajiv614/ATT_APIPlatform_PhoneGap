/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

define("att",["exports"],function(e){var t,n,r;(function(e){function o(e,t){return v.call(e,t)}function a(e,t){var n,r,o,a,i,s,c,u,d,p,f=t&&t.split("/"),h=T.map,l=h&&h["*"]||{};if(e&&"."===e.charAt(0))if(t){for(f=f.slice(0,f.length-1),e=f.concat(e.split("/")),u=0;e.length>u;u+=1)if(p=e[u],"."===p)e.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((f||l)&&h){for(n=e.split("/"),u=n.length;u>0;u-=1){if(r=n.slice(0,u).join("/"),f)for(d=f.length;d>0;d-=1)if(o=h[f.slice(0,d).join("/")],o&&(o=o[r])){a=o,i=u;break}if(a)break;!s&&l&&l[r]&&(s=l[r],c=u)}!a&&s&&(a=s,i=c),a&&(n.splice(0,i,a),e=n.join("/"))}return e}function i(t,n){return function(){return h.apply(e,b.call(arguments,0).concat([t,n]))}}function s(e){return function(t){return a(t,e)}}function c(e){return function(t){y[e]=t}}function u(t){if(o(m,t)){var n=m[t];delete m[t],S[t]=!0,f.apply(e,n)}if(!o(y,t)&&!o(S,t))throw Error("No "+t);return y[t]}function d(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function p(e){return function(){return T&&T.config&&T.config[e]||{}}}var f,h,l,g,y={},m={},T={},S={},v=Object.prototype.hasOwnProperty,b=[].slice;l=function(e,t){var n,r=d(e),o=r[0];return e=r[1],o&&(o=a(o,t),n=u(o)),o?e=n&&n.normalize?n.normalize(e,s(t)):a(e,t):(e=a(e,t),r=d(e),o=r[0],e=r[1],o&&(n=u(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},g={require:function(e){return i(e)},exports:function(e){var t=y[e];return t!==void 0?t:y[e]={}},module:function(e){return{id:e,uri:"",exports:y[e],config:p(e)}}},f=function(t,n,r,a){var s,d,p,f,h,T,v=[];if(a=a||t,"function"==typeof r){for(n=!n.length&&r.length?["require","exports","module"]:n,h=0;n.length>h;h+=1)if(f=l(n[h],a),d=f.f,"require"===d)v[h]=g.require(t);else if("exports"===d)v[h]=g.exports(t),T=!0;else if("module"===d)s=v[h]=g.module(t);else if(o(y,d)||o(m,d)||o(S,d))v[h]=u(d);else{if(!f.p)throw Error(t+" missing "+d);f.p.load(f.n,i(a,!0),c(d),{}),v[h]=y[d]}p=r.apply(y[t],v),t&&(s&&s.exports!==e&&s.exports!==y[t]?y[t]=s.exports:p===e&&T||(y[t]=p))}else t&&(y[t]=r)},t=n=h=function(t,n,r,o,a){return"string"==typeof t?g[t]?g[t](n):u(l(t,n).f):(t.splice||(T=t,n.splice?(t=n,n=r,r=null):t=e),n=n||function(){},"function"==typeof r&&(r=o,o=a),o?f(e,t,n,r):setTimeout(function(){f(e,t,n,r)},4),h)},h.config=function(e){return T=e,T.deps&&h(T.deps,T.callback),h},r=function(e,t,n){t.splice||(n=t,t=[]),o(y,e)||o(m,e)||(m[e]=[e,t,n])},r.amd={jQuery:!0}})(),r("../lib/almond",function(){}),r("att/util",["require","exports","module"],function(e,t){function n(e,t,n){if("object"==typeof e&&null!==e){var r=n||e;if(e.forEach){if(e.every){var o;return e.every(function(){return o=t.apply(this,arguments),void 0!==o},r),o}e.forEach.call(e,t,n)}else for(var a in e)if(e.hasOwnProperty(a)){var o=t.call(r,e[a],a,e);if(o)return o}}}function r(e){var t=f.call(arguments,1).reverse();return t.forEach(function(t){n(t,function(t,n){e[n]=t})}),e}function o(e){return null===e||void 0===e||""===e}function a(e,t,r){var a={};return t||(t={}),n(e,function(e,n){if(void 0!==e){var s=i(t[n],n,e,r);o(s)||(a[n]=s)}}),a}function i(e,t,n,r){var o=typeof n;if("string"===o||"function"===o?n={backup:n}:"boolean"===o&&(n={required:n}),!e&&n.backup){var a=typeof n.backup;"function"===a?e=n.backup(r,n):"string"===a&&(e=n.backup)}if(n.postProcess&&(e=n.postProcess(e,r,n)),e=e||"",n.prefix&&(e=n.prefix+e),n.suffix&&(e+=n.suffix),!e&&n.required){var i=t?' "'+t+'"':"";throw Error("Required parameter"+i+" is undefined")}return n.validate&&n.validate(e,r,n),e}function s(e,t,n,r){e.push(encodeURIComponent(t)+r+encodeURIComponent(n))}function c(e,t,r){if("object"!=typeof e)return"";var a=[],i="string"==typeof r?r:c.defaultAssignment;return n(e,function(e,n){o(e)||(Array.isArray(e)?a.push(c.stringifyArray(n,e,t,i)):s(a,n,e,i))}),0===a.length?"":a.join("string"==typeof t?t:c.defaultDelimiter)}function u(e,t,n){var r={},o="string"==typeof n?n:c.defaultAssignment,a=e.split("string"==typeof t?t:c.defaultDelimiter);return a.forEach(function(e){var t=e.split(o);if(2===t.length){var n=decodeURIComponent(t[0]),a=decodeURIComponent(t[1]),i=r[n];i?Array.isArray(i)?i.push(a):r[n]=[i,a]:r[n]=a}}),r}function d(e,t,n){return l.stringify(a(e,t,n))}function p(e,t){if(null==e)return e;var n=t.match(/(.*?)\.(.*)/);if(!n)return e[t];var r=n[1],o=n[2];return p(e[r],o)}var f=Array.prototype.slice,h=Function.prototype.apply;Function.prototype.call,t.forEach=n,t.copyObjTo=r,t.buildParams=a;var l=t.queryString=t.qs={};c.stringifyArray=function(e,t,n,r){var o=[],a="string"==typeof r?r:c.defaultAssignment;return t.forEach(function(t){s(o,e,t,a)}),o.join("string"==typeof n?n:c.defaultDelimiter)},c.defaultDelimiter="&",c.defaultAssignment="=",l.stringify=c,u.defaultDelimiter="&",u.defaultAssignment="=",l.parse=u,l.buildFromConfig=d,t.getFromObject=function(e,t){return p(e,t+"")},t.arrayToHash=function(){return f.call(arguments).reduce(function(e,t){return t.reduce(function(e,t){return e[t]=!0,e},e)},{})},t.apply=function(e,t,n){var r="string"==typeof t?e[t]:t;return h.call(r,e,n)};var g=t.camelCase=function(e){return"string"!=typeof e&&(e+=""),e[0].toLowerCase()+e.slice(1)},y=t.keysToCamelCase=function(e){if(Array.isArray(e))return e.map(y);if("object"!=typeof e||"[object Object]"!=""+e)return e;var t={};return n(e,function(e,n){return t[g(n)]=y(e),!1}),t};t.capitalize=function(e){return e[0].toUpperCase()+e.slice(1)},t.log=function(){console.log.apply(console,arguments)},t.inherits=function(e,t,n){e.prototype=new t,e.prototype.constructor=e,t.prototype.super_=t,r(e.prototype,n)}}),r("att/constants",["require","exports","module","att/util"],function(e,t){var n=e("att/util").copyObjTo;t.header={accept:{JSON:"application/json",XML:"application/xml",URL_ENCODED:"application/x-www-form-urlencoded"}},t.paramKey={HEADERS:"headers",QUERY:"query",URL_PARAMS:"urlParams",FILE_PATH:"filePath",BODY:"body",ATTACHMENTS:"attachments",OPTIONS:"options"},t.attachmentKeys={BODY:"body",FILE_PATH:"filePath",MIME_TYPE:"mimeType",NAME:"name",ENCODING:"fileEncoding"},t.header.contentType=n({},t.header.accept)}),r("att/ajax",["require","exports","module","att/util","att/constants"],function(e,t,n){function r(e,t,n){var r={error:{type:e,message:t}};return s.copyObjTo(r.error,n),r}function o(e){return r(e.constructor.name,e.message,{source:e})}function a(e,t,n){function a(e){var t=y[e];void 0!==typeof t&&(g[e]=t)}function d(e,t){v||(m(),T&&clearTimeout(T),v=!0,e.call(g,t,g))}function h(){var e=g.getResponseHeader("Content-Type");return e&&e.indexOf(u.header.contentType.JSON)>=0?JSON.parse(y.responseText):y.responseText}function l(){T&&d(n,r("AttXHRAbortError","Request aborted"))}if(s.log("Request: "+JSON.stringify(e,null,3)),e.isBridgeFunction||i.settings.isBridgeFunction(e))return i.settings.bridgeFunction.call(this,e,t,n),void 0;var g=this,y=i.settings.getXHR(e);if(y){this.xhr=y;var m=function(){p.forEach(a),y.readyState>=y.HEADERS_RECEIVED&&f.forEach(a)};m();var T,S=s.copyObjTo({},e.headers),v=!1,b=function(e){if(s.log("Success: "+y.responseText),y.status>=400)return 401==y.status&&i.settings.clearCache(),C.call(this,e),void 0;var r;try{r=h()}catch(a){var c=o(a);return c.error.type="AttXHRParseError",d(n,c),void 0}d(t,{data:r})},C=function(e){var t;s.log("Error: "+y.responseText);try{t=h()}catch(o){}t||(t=y.responseText);var a=e.error||y.statusText||"Connection Error",i=r("AttXHRRequestError",a,{status:y.status});t&&(i.data=t),d(n,i)};y.addEventListener?(y.addEventListener("load",b,!1),y.addEventListener("error",C,!1),y.addEventListener("abort",l,!1),y.addEventListener("readystatechange",m)):(y.onload=b,y.onerror=C,y.onabort=l,y.readystatechange=m);var k=e.url;if(e.query){var A=e.query,E=typeof A;A="object"===E?c.stringify(A):"string"===E?A:!1,A&&(k+="?"+A)}y.open(e.method,k,!0),S["X-Requested-With"]="XMLHttpRequest";var x=y.timeout=void 0!==e.timeout?e.timeout:i.settings.timeout;x>0&&(T=setTimeout(function(){T=null,y.abort(),d(n,r("AttXHRTimeoutError","Request timed out after "+x+"ms"))},x));var M=e.body;if("object"==typeof M)switch(S["Content-Type"]){case u.header.contentType.JSON:M=JSON.stringify(e.body);break;case u.header.contentType.URL_ENCODED:M=c.stringify(e.body);break;default:}s.forEach(S,function(e,t){e&&y.setRequestHeader(t,e)}),y.send(M)}}var i,s=e("att/util"),c=s.qs,u=e("att/constants"),d=["abort","getResponseHeader","getAllResponseHeaders"],p=["readyState","responseText","responseData","responseType"],f=["status","statusText"];d.forEach(function(e){a.prototype[e]=function(){var t=this.xhr,n=t[e];return s.apply(t,n,arguments)}}),i=function i(e,t,n){return new a(e,t,n)},i.settings={getXHR:function(){try{return new XMLHttpRequest}catch(e){}},timeout:9e4,isBridgeFunction:function(){return!1},bridgeFunction:function(){throw Error("This method is not supported in this platform")}},n.exports=i}),r("att/RESTfulDefinition",["require","exports","module","att/util","att/constants"],function(e,t,n){function r(e){a(this,e)}var o=e("att/util"),a=o.copyObjTo,i=o.forEach,s=o.buildParams,c=o.qs,u=e("att/constants");a(r.prototype,{addDefinition:function(e,t){if(!(t instanceof r)&&"function"!=typeof t)throw Error("Only RESTfulDefinition or ATTMethod can be added with this method");var n=e.split("."),o=n.pop(),a=this;n.forEach(function(e){a[e]||(a[e]=new r),a=a[e]}),i(t.methods,function(e,n){t.addMethod(n,e.executor,e)}),delete t.methods,a[o]=t,t.parent=this},addMethod:function(e,t,n){function o(e,t,n){return 3>arguments.length&&(n=t,t=e,e={}),o.parent.executor(o,e,t,n)}if(3>arguments.length&&"object"==typeof t){var i=n;n=t,t=i}a(o,n,r.prototype,r.defaultMethodParams),o.executor=t,o.methodName=e&&e.match(/\.?([^.]*)$/)[1],this.addDefinition(e,o)},forEachToRoot:function(e,t){var n=this,r=0,o=t||this;do e.call(o,n,r++),n=n.parent;while(n)},getUrl:function(e){var t=(this.parent?this.parent.getUrl():"")+(this.appendUrl||"");if(e){var n=this.getUrl.paramsRegex,r=s(this.inferUrlParamsConfig(),e[u.paramKey.URL_PARAMS],e);t=t.replace(n,function(e,t,n,o){var a=r[n];return o&&!a?"":t+a})}return t},getHeaders:function(e){return s(this.getHeaderConfig(),e[u.paramKey.HEADERS],e)},getQueryString:function(e){return c.buildFromConfig(this.getQueryStringConfig(),e[u.paramKey.QUERY],e)},getRoot:function(){var e;return this.forEachToRoot(function(t){e=t}),e},executor:function(){return this.parent?this.parent.executor.apply(this.parent,arguments):void 0},inferUrlParamsConfig:function(){var e=this.getUrl.paramsRegex,t={};return this.getUrl().replace(e,function(e,n,r,o){return t[r]=!o,""}),a(t,this.getUrlParamsConfig())}}),["headerConfig","queryStringConfig","urlParamsConfig"].forEach(function(e){var t="get"+e[0].toUpperCase()+e.substr(1);r.prototype[t]=function(){return this.parent?a({},this.parent[t].apply(this.parent,arguments),this[e]):this[e]}}),r.prototype.getUrl.paramsRegex=/(\/):([^\/?]*)(\?$)?/g,r.defaultMethodParams={},n.exports=r}),r("att/main",["require","exports","module","att/ajax","att/util","att/constants","att/RESTfulDefinition"],function(e,t,n){function r(e){return{type:e.constructor.name,message:e.message,source:e}}function o(e,t){var n={error:r(e)};return t(n),n}function a(e,t){var n=e[y.attachmentKeys.BODY],r=e[y.attachmentKeys.FILE_PATH];if(n&&r){var o='Both "'+y.attachmentKeys.BODY+'" and "'+y.attachmentKeys.FILE_PATH+'" cannot both be defined '+t?"in an attachment":"in the parameters";throw Error(o)}if(t&&!n&&!r)throw Error('Either "'+y.attachmentKeys.BODY+'" or "'+y.attachmentKeys.FILE_PATH+'" must be defined in all attachments')}function i(e,t,n,o){function i(e){return function(){e&&e.apply(this,arguments),delete c.active}}function s(e){c.error=r(e),o(c.error)}var c={},u=this.getRoot(),d=function(r){var u,d,p;try{var h=t[y.paramKey.QUERY];u=e.getHeaders(t),d="string"==typeof h?h:e.getQueryString(t),p=e.getUrl(t);var g=t[y.paramKey.ATTACHMENTS];g&&g.forEach(function(e){a(e,!0)}),a(t)}catch(m){return m.message+="header ",s(m),void 0}if(r)u.Authorization="Bearer "+r.data.token;else if(!e.tokenType===T.TokenType.NONE)return s(Error("Missing access token for this request, fetch a new one")),void 0;var S=l({method:e.method,url:p},t);d&&(S.query=d),S.headers=u;var v=e.executor?e.executor(S,t,n,o):S;if(v===S)S.methodName=e.methodName,S.useBridge=e.useBridge,c.active=f(S,i(S.success||n),i(S.fail||o));else{if(v instanceof Error)return s(v),void 0;v&&"[object Object]"==""+v.constructor?l(c,v):c.data=v,n({data:v})}};switch(e.tokenType){case T.TokenType.NONE:d();break;case T.TokenType.USER:u.userAuthToken.fetch(i(d),i(o));break;case T.TokenType.ACCESS:default:u.accessToken.fetch(i(d),i(o))}return c}function s(e){l(this,e)}function c(e){l(this,e)}function u(e){l(this,e)}function d(e){var t={},n={};return e.split(",").forEach(function(e){A[e]?n[e]=!0:t[e]=!0}),{accessTokenScope:Object.keys(t).sort().join(","),userAuthTokenScope:Object.keys(n).sort().join(",")}}function p(e){return"string"==typeof e?e:g.stringify(e,",")}var f=e("att/ajax"),h=e("att/util"),l=h.copyObjTo,g=(h.forEach,h.qs),y=e("att/constants"),m=e("att/RESTfulDefinition"),T=n.exports=new m({executor:i});(function(){function e(){return(t||"")+(n||"")}var t,n;T.setProtocol=function(n){t=n,T.appendUrl=e()},T.getProtocol=function(){return t},T.setDomain=function(t){n=t,T.appendUrl=e()},T.getDomain=function(){return n}})(),T.setProtocol("https://"),T.setDomain("api.att.com"),T.TokenType={NONE:"noToken",ACCESS:"accessToken",USER:"userAuthToken"},m.defaultMethodParams.tokenType=T.TokenType.ACCESS;var S,v,b,C,k,A={IMMN:!0,MIM:!0,TL:!0};return T.addDefinition("OAuth",new m({appendUrl:"/oauth",methods:{getAccessToken:{appendUrl:"/access_token",method:"POST",tokenType:T.TokenType.NONE,headerConfig:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},executor:function(e,t,n,r){var a=e.body;if("string"==typeof a&&(a=g.parse(a)),!S&&!a.client_id||!v&&!a.client_secret){var i=Error("App Key or Secret are undefined. Set the keys recieved from developer.att.com");return o(i,r)}return a.client_id=S,a.client_secret=v,e.body=g.stringify(a),e}},obtainEndUserAuthorization:{method:"GET",appendUrl:"/authorize",tokenType:T.TokenType.NONE,queryStringConfig:{client_id:{required:!0,backup:function(){return S}},scope:{required:!0,backup:function(){return C}},redirect_uri:!1},executor:function(e){return{uri:e.url+"?"+e.query}}}}})),tokenObjProto=s.prototype,l(tokenObjProto,{fetch:function(e,t,n){if(2===arguments.length){var r=n;n=t,t=e,e=r}var a={},i=this;if(this.isExpired())h.log("Refreshing the token in memory"),a.grant_type="refresh_token",a.refresh_token=this.refreshToken;else{if(this.token){h.log("Used token from memory: "+this.token);var s={data:this.getCache()};return t.call(this,s),s}h.log("Fetching a new token");try{this.formatParameters(a,e)}catch(c){return o(c,n)}}var u={appKey:S,accessTokenScope:b,userAuthScope:C},d=function(e,n){if(delete i.fetching,e.data.error)return failCB.call(this,{error:{type:"AuthorizationError",message:e.data.error}}),void 0;var r=i.formatResponse(u,e.data);i.save(r),t&&t.call(i,{data:i.getCache()},n)},p=function(){delete i.fetching,n&&n.apply(i,arguments)},f=T.OAuth.getAccessToken({body:a},d,p);return f.active&&(this.fetching=f.active),f},refresh:function(e,t){return this.refreshToken?(this.expiration=Date.now()-10,this.fetch(e,t)):o(Error("Fetch a token before you can refresh it"),t)},formatResponse:function(e,t){var n=parseInt(t.expires_in);return{t:t.access_token,r:t.refresh_token,e:n&&Date.now()+1e3*n,k:e.appKey}},keys:["token","refreshToken","expiration","key","scope"],clearCache:function(){this.keys.forEach(function(e){delete this[e]},this)},getCache:function(){var e={};return this.keys.forEach(function(t){e[t]=this[t]},this),e},cache:function(e){e.s&&e.k&&(this.token=e.t,this.refreshToken=e.r,this.expiration=e.e,this.key=e.k,this.scope=e.s)},isExpired:function(){return this.refreshToken&&0!==this.expiration&&this.expiration<Date.now()},remove:function(){this.clearCache()},save:function(e){this.cache(e)},load:function(){}}),h.inherits(c,s,{formatParameters:function(e){if(!b)throw Error("Missing scope");e.scope=b,e.grant_type="client_credentials"},formatResponse:function(e){var t=tokenObjProto.formatResponse.apply(this,arguments);return t.s=e.accessTokenScope,t},cache:function(e){b&&e.s!==b||tokenObjProto.cache.apply(this,arguments)}}),T.accessToken=new c,h.inherits(u,s,{formatParameters:function(e,t){if(e.code="string"==typeof t&&t||k,!e.code){var n="oAuthCode is "+(null===k?"no longer valid":"undefined");throw Error(n)}e.grant_type="authorization_code"},formatResponse:function(e){var t=tokenObjProto.formatResponse.apply(this,arguments);return t.s=e.userAuthScope,t},cache:function(e){C&&e.s!==C||tokenObjProto.cache.apply(this,arguments)}}),T.userAuthToken=new u,T.setKeys=function(e,t,n){var r=d(n),o=r.accessTokenScope&&T.accessToken.scope!==r.accessTokenScope,a=r.userAuthTokenScope&&T.userAuthToken.scope!==r.userAuthTokenScope;(S!==e||v!==t||o||a)&&((T.accessToken.key!==e||o)&&T.accessToken.clearCache(),(T.userAuthToken.key!==e||a)&&T.userAuthToken.clearCache(),S=e,v=t,o&&(b=r.accessTokenScope),a&&(C=r.userAuthTokenScope))},T.setOAuthCode=function(e){T.userAuthToken.clearCache(),k=e},T.addDefinition("SMS",new m({appendUrl:"/sms/v3/messaging",headerConfig:{Accept:!1},methods:{sendSMS:{appendUrl:"/outbox",method:"POST",headerConfig:{"Content-Type":!0}},getSMSDeliveryStatus:{appendUrl:"/outbox/:smsId",method:"GET"},getSMS:{appendUrl:"/inbox/:registrationId",method:"GET"}}})),T.addDefinition("MMS",new m({appendUrl:"/mms/v3/messaging/outbox",headerConfig:{Accept:!1},methods:{sendMMS:{method:"POST",headerConfig:{"Content-Type":!0},useBridge:!0},getMMSDeliveryStatus:{method:"GET",appendUrl:"/:mmsId"}}})),function(){function e(e){return e.url+"?"+e.query}var t={Signature:!0,SignedPaymentDetail:!0,clientid:{backup:function(){return S},required:!0}};T.addDefinition("Payment",new m({appendUrl:"/rest/3/Commerce/Payment",methods:{newSubscription:{appendUrl:"/Subscriptions",method:"GET",tokenType:T.TokenType.NONE,executor:e,queryStringConfig:t},getSubscriptionStatus:{appendUrl:"/Subscriptions/:idType/:id",method:"GET",headerConfig:{Accept:!1}},getSubscriptionDetails:{appendUrl:"/Subscriptions/:merchantSubscriptionId/Detail/:consumerId",method:"GET",headerConfig:{Accept:!1}},newTransaction:{appendUrl:"/Transactions",method:"GET",tokenType:T.TokenType.NONE,executor:e,queryStringConfig:t},getTransactionStatus:{method:"GET",headerConfig:{Accept:!1},appendUrl:"/Transactions/:idType/:id"},refundTransaction:{appendUrl:"/Transactions/:transactionId",method:"PUT",headerConfig:{"Content-Type":!0,Accept:!1},queryStringConfig:{Action:!0}},getNotification:{appendUrl:"/Notifications/:notificationId",method:"GET",headerConfig:{Accept:!1}},acknowledgeNotification:{appendUrl:"/Notifications/:notificationId",method:"PUT",headerConfig:{Accept:!1}}}}))}(),T.addDefinition("IMMN",new m({appendUrl:"/rest/1/MyMessages",headerConfig:{Accept:!1},methods:{sendMessage:{method:"POST",headerConfig:{"Content-Type":!0},tokenType:T.TokenType.USER,useBridge:!0},getMessageHeaders:{method:"GET",tokenType:T.TokenType.USER,queryStringConfig:{HeaderCount:!0,IndexCursor:!1}},getMessageContent:{method:"GET",tokenType:T.TokenType.USER,appendUrl:"/:messageId/:partNumber?"}}})),T.addDefinition("CMS",new m({appendUrl:"/rest/1/Sessions",headerConfig:{"Content-Type":!0,Accept:!1},methods:{createSession:{method:"POST"},sendSignal:{method:"POST",appendUrl:"/:cmsId/Signals"}}})),T.addDefinition("Ads",new m({appendUrl:"/rest/1/ads",methods:{getAds:{method:"GET",headerConfig:{Accept:!1,Udid:!0},queryStringConfig:{Category:!0,Gender:!1,ZipCode:!1,AreaCode:!1,City:!1,Country:!1,Longitude:!1,Latitude:!1,MaxHeight:!1,MaxWidth:!1,MinHeight:!1,MinWidth:!1,Type:!1,Timeout:!1,AgeGroup:!1,Over18:!1,KeyWords:!1,IsSizeRequired:!1,Premium:!1}}}})),T.addDefinition("Location",new m({appendUrl:"/2/devices/location",methods:{getDeviceLocation:{method:"GET",tokenType:T.TokenType.USER,headerConfig:{Accept:!1},queryStringConfig:{requestedAccuracy:!1,Tolerance:!1,acceptableAccuracy:!1}}}})),T.addDefinition("Speech",new m({appendUrl:"/speech/v3/"})),T.Speech.addMethod("speechToText",null,{appendUrl:"speechToText",method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,"Transfer-Encoding":!1,"X-SpeechContext":!1,"X-SpeechSubContext":!1,"Content-Language":!1,"Content-Length":!1,"X-Arg":{postProcess:p}},useBridge:!0}),T.Speech.addMethod("textToSpeech",null,{appendUrl:"textToSpeech",method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,"Content-Language":!1,"Content-Length":{backup:function(e){return e.body.length}},"X-Arg":{postProcess:p}},useBridge:!0}),T.addDefinition("Notary",new m({appendUrl:"/Security/Notary/Rest/1/SignedPayload",methods:{signedPayload:{method:"POST",headerConfig:{Accept:!1,"Content-Type":!0,Client_id:!0,Client_secret:!0},executor:function(e,t){var n=T.accessToken.token;return n&&t.headers["Content-Type"]===y.header.contentType.JSON&&h.getFromObject(t,"body.MerchantPaymentRedirectUrl")&&(t.body.MerchantPaymentRedirectUrl+="?token="+n),e}}}})),T}),r("extensions/phonegap",["att/ajax","att/main"],function(e,t){var n="AttPlugin",r=function(e){return e&&e.length?e.map(function(e){return{fileObject:e.body||void 0,filePath:e.filePath||void 0,fileType:e.mimeType||void 0,fileName:e.name||void 0}}):[{}]},o=function(e){return{url:e.url,accessToken:e.headers.Authorization,accept:e.headers.Accept||"",contentType:e.headers["Content-Type"],body:e.body||"",attachments:r(e.attachments)}},a={sendMMS:o,sendMessage:o,speechToText:function(e){return{url:e.url,token:e.headers.Authorization,accept:e.headers.Accept||"",contentType:e.headers["Content-Type"],contentLanguage:e.headers["Content-Language"]||"",contentLength:e.headers["Content-Length"]||"",XSpeechContext:e.headers["X-SpeechContext"]||"Generic",transferEncoding:e.headers["Transfer-Encoding"]||"",xarg:e.headers["X-Arg"]||"",filePath:e.filePath}},textToSpeech:function(e){return{url:e.url,token:e.headers.Authorization,accept:e.headers.Accept||"",contentType:e.headers["Content-Type"],xarg:e.headers["X-Arg"]||"",body:e.body,data:"",filePath:e.responseFilePath}}};return e.settings.clearCache=function(){localStorage.removeItem("att.token.accessToken")},e.settings.isBridgeFunction=function(e){return e.useBridge},e.settings.bridgeFunction=function(e,t,r){var o=e.methodName;device.platform.match(/iOS/)&&(e=a[o](e));var i=function(e){t({data:e.success||e})};Cordova.exec(i,r,n,o,[e])},["accessToken","userAuthToken"].forEach(function(e){var n=t[e],r="att.token."+e,o=n.constructor.prototype,a=n.remove,i=n.save;o.remove=function(){a.apply(this,arguments),localStorage.removeItem(r)},o.save=function(e){localStorage.setItem(r,JSON.stringify(e)),i.apply(this,arguments)},o.load=function(){var e=localStorage.getItem(r);e&&(console.log("Loading token from storage: "+e),this.cache(JSON.parse(e)))},n.load()}),t}),r("wrappers/wrapper-1.0",["att/main","att/constants","att/util"],function(e,t,n){function r(e,t){var n={};return e?(t&&(n["Content-Type"]=e.contentType),n.Accept=e.accept,n):n}function o(e){var t=e.fileName||void 0;return!t&&e.filePath&&(t=e.filePath.match(/.*\/(.*)/)[1]),{body:e.fileObject||void 0,filePath:e.filePath||void 0,fileName:t,mimeType:e.fileType||void 0,name:t,encoding:e.fileObject?"base64":void 0}}function a(e){return e?e.map(o):void 0}function i(e){return function(t){arguments[0]=JSON.stringify(t),e.apply(this,arguments)}}function s(e,t){return function(n,r,o){var a=function(e){e&&(arguments[0]=e.data),d(t[1])?r.apply(this,arguments):i(r).apply(this,arguments)},s=i(o);e(n,a,s)}}var c={};c.authorize=function(t,n,r,o,a){e.setKeys(t,n,r),a&&e.setOAuthCode(a)},c.setAccessToken=function(t,n,r){e.accessToken.token=t,e.accessToken.refresh=n,e.accessToken.expiration=r},c.accessToken=e.accessToken,c.userAuthToken=e.userAuthToken,c.getCachedAccessToken=function(){return e.accessToken.token},c.getCachedUserAuthToken=function(){return e.userAuthToken.token},c.SMS={sendSMS:function(t,n,o){e.SMS.sendSMS({headers:r(t,!0),body:"application/json"===t.contentType.toLowerCase()&&"object"==typeof t.body?JSON.stringify({outboundSMSRequest:t.body}):t.body},n,o)},getSMSDeliveryStatus:function(t,n,o){e.SMS.getSMSDeliveryStatus({headers:r(t),urlParams:{smsId:t.smsId}},n,o)},getSMS:function(t,n,o){e.SMS.getSMS({headers:r(t),urlParams:{registrationId:t.registrationId}},n,o)}},c.MMS={sendMMS:function(n,o,i){var s=n.contentType===t.header.contentType.JSON?'{"outboundMessageRequest":'+("object"==typeof n.body?JSON.stringify(n.body):n.body)+"}":n.body;e.MMS.sendMMS({headers:r(n,!0),body:s,attachments:a(n.attachments)},o,i)},getMMSDeliveryStatus:function(t,n,o){e.MMS.getMMSDeliveryStatus({headers:r(t),urlParams:{mmsId:t.id}},n,o)}},function(){function t(t){return function(n,o,a){e.Payment[t]({headers:r(n),urlParams:{notificationId:n.notificationId}},o,a)}}var o={Signature:"signature",SignedPaymentDetail:"signedDocument",clientid:"clientId"};c.Payment={newSubscription:function(t,r,a){var i={};n.forEach(o,function(e,n){i[n]=t[e]}),e.Payment.newSubscription({query:i},r,a)},getSubscriptionStatus:function(t,n,o){var a;t.subscriptionId?a={idType:"SubscriptionId",id:t.subscriptionId}:t.merchantTransactionId?a={idType:"MerchantTransactionId",id:t.merchantTransactionId}:t.subscriptionAuthCode&&(a={idType:"SubscriptionAuthCode",id:t.subscriptionAuthCode}),e.Payment.getSubscriptionStatus({headers:r(t),urlParams:a},n,o)},getSubscriptionDetails:function(t,n,o){e.Payment.getSubscriptionDetails({headers:r(t),urlParams:{merchantSubscriptionId:t.merchantSubscriptionId,consumerId:t.consumerId}},n,o)},newTransaction:function(t,r,a){var i={};n.forEach(o,function(e,n){i[n]=t[e]}),e.Payment.newTransaction({query:i},r,a)},getTransactionStatus:function(t,n,o){var a;t.transactionId?a={idType:"TransactionId",id:t.transactionID}:t.merchantTransactionId?a={idType:"MerchantTransactionId",id:t.merchantTransactionId}:t.transactionAuthCode&&(a={idType:"TransactionAuthCode",id:t.transactionAuthCode}),e.Payment.getTransactionStatus({headers:r(t),urlParams:a},n,o)},refundTransaction:function(t,n,o){e.Payment.refundTransaction({headers:r(t,!0),query:{Action:t.action},urlParams:{transactionId:t.transactionId},body:t.body},n,o)},getNotification:t("getNotification"),acknowledgeNotification:t("acknowledgeNotification")}}(),c.IMMN={sendMessage:function(t,n,o){e.IMMN.sendMessage({headers:r(t,!0),body:t.body,attachment:a(t.attachments)},n,o)},getMessageHeaders:function(t,n,o){e.IMMN.getMessageHeaders({headers:r(t),query:{HeaderCount:t.headerCount,IndexCursor:t.indexCursor}},n,o)},getMessageContent:function(t,n,o){e.IMMN.getMessageContent({headers:r(t),urlParams:{messageId:t.messageId,partNumber:t.partNumber}},n,o)}},c.CMS={createSession:function(t,n,o){e.CMS.createSession({headers:r(t,!0),body:t.body},n,o)},sendSignal:function(t,n,o){e.CMS.sendSignal({headers:r(t,!0),urlParams:{cmsId:t.cmsId},body:t.body},n,o)}},c.Ads={getAds:function(t,n,o){var a=r(t);a.Udid=t.udid,a["User-Agent"]=t.userAgent,e.Ads.getAds({headers:a,query:t.body},n,o)}},c.OAuth={obtainEndUserAuthorization:function(t,n,o){e.OAuth.obtainEndUserAuthorization({headers:r(t),query:{client_id:t.clientId,scope:t.scope,redirect_uri:t.redirectUrl}},n,o)}},c.Location={getDeviceLocation:function(t,n,o){e.Location.getDeviceLocation({headers:r(t),query:{requestedAccuracy:t.requestedAccuracy,Tolerance:t.tolerance,acceptableAccuracy:t.acceptableAccuracy}},n,o)}},c.Speech={speechToText:function(t,n,r){e.Speech.speechToText({headers:{Accept:t.accept,"Content-Type":t.contentType,"Transfer-Encoding":t.transferEncoding,"X-SpeechContext":t.xSpeechContext,"X-SpeechSubContext":t.xSpeechSubContext,"Content-Language":t.contentLanguage,"Content-Length":t.contentLength,"X-Arg":t.xArg||t.xarg},filePath:t.filePath},n,r)}};var u=c.Speech;c.Speech=u||{},c.Speech.textToSpeech=function(t,n,r){e.Speech.textToSpeech({headers:{Accept:t.accept,"Content-Type":t.contentType,"Content-Language":t.contentLanguage,"Content-Length":t.contentLength,"X-Arg":t.xarg},responseFilePath:t.filePath,body:t.body},n,r)},c.tts={textToSpeech:c.Speech.textToSpeech},u?delete u.textToSpeech:delete c.Speech;c.Notary={signedPayload:function(t,n,r){e.Notary.signedPayload({headers:{Accept:t.accept,"Content-Type":t.contentType,Client_id:t.clientId,Client_secret:t.clientSecret},body:t.data},n,r)}};var d=function(e){return["newTransaction","newSubscription"].indexOf(e)>=0||!0&&["sendMMS","sendMessage","speechToText","textToSpeech"].indexOf(e)>=0},p={speechToTextCustom:!0},f={accessToken:!0,userAuthToken:!0};return n.forEach(c,function(e,t){"object"!=typeof e||f[t]||n.forEach(e,function(n,r){"function"!=typeof n||p[r]||(e[r]=s(n,[t,r]))})}),c});var o=n;o("extensions/phonegap"),e.ATT=o("wrappers/wrapper-1.0")});